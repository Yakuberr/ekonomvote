<div class="card mt-3 bg-black bg-opacity-25 border-gray shadow-lg">
    <div class="card-body p-0">
        <div class="table-responsive table-container">
            <table class="table table-dark table-striped table-hover mb-0 table-fixed">
                <colgroup>
                    <col style="width: 4%;">
                    <col style="width: 8%;">
                    <col style="width: 8%;">
                    <col style="width: 8%;">
                    <col style="width: 8%;">
                    <col style="width: 8%;">
                    <col style="width: 12%;">
                    <col style="width: 12%;">
                </colgroup>
                <thead class="table-dark">
                    <tr>
                        <th scope="col" class="text-center align-middle">ID</th>
                        <th scope="col" class="text-center align-middle">Nauczyciel</th>
                        <th scope="col" class="text-center align-middle">Oscar</th>
                        <th scope="col" class="text-center align-middle">Wydarzenie</th>
                        <th scope="col" class="text-center align-middle">Runda głosowania</th>
                        <th scope="col" class="text-center align-middle">Data utworzenia</th>
                        <th scope="col" class="text-center align-middle">Data edycji</th>
                        <th scope="col" class="text-center align-middle">Akcje</th>
                    </tr>
                </thead>
                <tbody>
                    {% if page_obj %}
                    {% for obj in page_obj %}
                    <tr id="tableRow{{ loop.index0 }}">
                        <td class="text-center align-middle">
                            <span>{{ obj.id }}</span>
                        </td>
                        <td class="text-center align-middle">
                            <a class="link-light" href="{{ url('panel:update_teacher', kwargs={'teacher_id':obj.teacher.id}) }}">{{
                                obj.teacher.first_name }} {{ obj.teacher.second_name }} {{ obj.teacher.last_name }}</a>
                        </td>
                        <td class="text-center align-middle">
                            <a class="link-light" href="{{ url('panel:update_oscar', kwargs={'oscar_id':obj.oscar.id}) }}">{{
                                obj.oscar.name }}</a>
                        </td>
                        <td class="text-center align-middle">
                            <a class="link-light"
                                href="{{ url('panel:update_voting_event', kwargs={'voting_event_id':obj.voting_round.voting_event.id}) }}">{{
                                obj.voting_round.voting_event.id }}</a>
                        </td>
                        <td class="text-center align-middle">
                            <span>
                                {% if obj.voting_round.round_type == "F" %}
                                Finał
                                {% else %}
                                Nominacja
                                {% endif %}
                            </span>
                        </td>
                        <td class="text-center align-middle">
                            <span class="small">{{ obj.localize_dt(obj.created_at).strftime('%Y-%m-%d %H:%M:%S')
                                }}</span>
                        </td>
                        <td class="text-center align-middle">
                            <span class="small">{{ obj.localize_dt(obj.updated_at).strftime('%Y-%m-%d %H:%M:%S')
                                }}</span>
                        </td>
                        <td class="text-center align-middle">
                            <a href="{{ url('panel:update_candidature', kwargs={'candidature_id':obj.id}) }}"
                                class="btn btn-sm btn-outline-eco-light-cyan">Edytuj</a>
                            <button btn-type="delete" btn-data="{{ obj.pk }}" btn-row="{{ loop.index0 }}"
                                class="btn btn-sm btn-outline-danger">Usuń</button>
                        </td>
                    </tr>
                    {% endfor %}
                    {% else %}
                    <tr>
                        <td colspan="8" class="text-center text-muted py-4">
                            <i class="fas fa-user-slash fa-2x mb-2"></i><br>
                            Brak kandydatur o podanych kryteriach
                        </td>
                    </tr>
                    {% endif %}
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Paginacja z zachowaniem sortowania -->
<nav aria-label="pagination" class="mt-5 mb-3">
    <ul class="pagination justify-content-center">
        {% if page_obj.has_previous() %}
        <li class="page-item"><a class="page-link"
                hx-get="{{ url('panel:partial_list_candidatures') }}?page=1&{{ querystring }}" href="">&laquo;&laquo;
            </a></li>
        <li class="page-item"><a class="page-link"
                hx-get="{{ url('panel:partial_list_candidatures') }}?page={{ page_obj.previous_page_number() }}&{{ querystring }}"
                href="">&laquo;</a>
        </li>
        {% else %}
        <li class="page-item disabled"><a class="page-link" href="">&laquo;&laquo; </a></li>
        <li class="page-item disabled"><a class="page-link" href="">&laquo;</a></li>
        {% endif %}
        <li class="page-item active">
            <a class="page-link" href="#" aria-current="page">{{ page_obj.number }}</a>
        </li>
        {% if page_obj.has_next() %}
        <li class="page-item"><a class="page-link"
                hx-get="{{ url('panel:partial_list_candidatures') }}?page={{ page_obj.next_page_number() }}&{{ querystring }}"
                href="">&raquo;</a>
        </li>
        <li class="page-item"><a class="page-link"
                hx-get="{{ url('panel:partial_list_candidatures') }}?page={{ page_obj.paginator.num_pages }}&{{querystring}}"
                href="">&raquo;&raquo;</a>
        </li>
        {% else %}
        <li class="page-item disabled"><a class="page-link" href="">&raquo;</a></li>
        <li class="page-item disabled"><a class="page-link" href="">&raquo;&raquo;</a></li>
        {% endif %}
    </ul>
</nav>